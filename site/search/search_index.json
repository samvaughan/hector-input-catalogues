{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"The Hector Input Catalogues","text":"<p>This site describes the code I've written to go from the initial catalogues containing millions of objects to the final catalogues of targets that will be part of the Hector survey. </p> <p>The Hector Survey is made up of two large patches of sky, named WAVES North and WAVES South, as well as 11 dense galaxy clusters<sup>1</sup> at a range of Right Ascensions. To begin with, we've sub-divided the large WAVES North and South regions of sky into five smaller regions of roughly 60 square degrees: G12, G15, G23, H01 and H03. As the survey progresses, we'll add more of these.</p> <p>Along with the clusters, this makes 15 unique regions which this pipeline will create catalogues for. The ultimate outputs of this pipeline are the catalogues of galaxy targets, guide stars and standard stars for each of these regions.</p> <p>The list of Hector regions and the sky coordinates of their centres (in degrees) is below, and can also be downloaded as a .csv file here</p> Region Name Right Ascension Declination A0151 17.10920 -15.40920 A3158 55.77040 -53.65310 A3266 67.77460 -61.44360 A3376 90.15290 -40.03260 A3391 96.58590 -53.69330 A3395 96.88000 -54.43740 A3667 303.09170 -56.81520 A3716 312.86000 -52.70700 A2399 329.372605 -7.796920 A0119 14.067150 -1.255370 A0085 10.460211 -9.303184 G12 180 0.0 G15 225 0.0 G23 345 -32.5 H01 15 30 H03 45 30 <ol> <li> <p>Really more like 10- the clusters A3391 and A3395 are merging, and are treated as a single field in the pipeline.\u00a0\u21a9</p> </li> </ol>"},{"location":"adding_a_new_region/","title":"Adding a new Region","text":"<p>As the Hector survey progresses, it will become necessary to create catalogues of targets, standard stars and guide stars for a new region of the sky. This page explains how to do that.</p> <p>You'll need to make the following changes:</p> <ol> <li>Make a backup of all of the current catalogues. You really don't want to overwrite anything!</li> <li>Edit the file <code>resources/RegionInformation/all_regions.csv</code> to add the properties of the new region. You'll need to add a name, the minimum and maximum RA and Declination of the region, the area it covers, the \"master region\" that it comes from (e.g. <code>WAVES_S</code>, <code>WAVES_N</code> or <code>HectorClusters</code>) and the source of the photometry (where we get the guide and standard star catalogues from). Note that the pipeline at the moment can only download catalogues from the SkyMapper or PANSTARRS surveys at the moment.</li> <li>Re-run the pipeline from the main folder: <code>snakemake --cores 1</code>. You should see the new region catalogues being made.</li> <li>Check that the master catalogue you've just updated (e.g. the master WAVES N catalogue if you've added a WAVES N region) is the same as it was before, just with extra galaxies added which correspond to the new region of sky. </li> </ol> <p>Danger</p> <p>I've not tested adding a new region. There is a real chance of overwriting the master catalogues, which might be unrecoverable due to the random sampling element. I don't think that this is the case (I've added random seeds throughout the code to try and make everything reproducible) but I'm giving you a fair warning here to stress how important it is to make a backup of the catalogues before you try adding a new region.</p>"},{"location":"walkthrough/","title":"Running the Code","text":"<p>To run the code re-make the catalogues for all of the Hector regions, all you need to run is:</p> <pre><code>snakemake --cores 1 results/RegionCatalogues/{WAVES_N/WAVES_S}/{region_name}/{region_name}_Hector_target_galaxies.csv}\n</code></pre> <p>from this folder. <code>{region_name}</code> refers to G12, G15, etc, or a new region entirely (see Adding a New Region). Unlike for some of the other pipelines I've written for Hector, there isn't a config file you need to point to. The required input files you'll need for this to work and the steps that the pipeline will carry out are outlined below.</p> <p>Danger</p> <p>The default choice of sub-sampling method during the target selection is randomly selecting galaxies above a given stellar mass/colour. I've tried very hard to ensure that I'm using a set random seed, such that if you ran this pipeline twice you'd get identical catalogues out. I can't guarantee that this will always be the case if you make changes to the code, however! Please make a back up of the master catalogues for each region before running this code again. If you overwrite the master catalogues they might not be recoverable, and this would make a huge mess going forward! This has already happened to me once, which is why I'm raising this point again (it's the reason we have a pipeline step to <code>add_previously_observed_galaxies_back_to_master_catalogue</code>- see below).</p>"},{"location":"walkthrough/#necessary-input-catalogues","title":"Necessary input catalogues","text":"<p>To run this code, you'll need some master input catalogues. These have been created by other people and kindly contributed to the Hector survey. They;re not public, and so aren't stored on the github repo. As of February 2024, these are all stored on the Hector Cloud Storage site at <code>Hector/Stefania/HectorInputCatalogues.zip</code>, for which you'll need a Data Central account and to be a member of the Hector team.</p> <p>In the folder <code>resources/InitialInputCatalogues</code> there should be three files: <code>COMBINED_ApMatch_MSTARV2.5_MattOwers_310123.parquet</code>, <code>WAVES_N_Hector.parquet</code> and <code>WAVES_S_Hector.parquet</code>. These contain the catalogues of galaxy targets for the Clusters, WAVES North and WAVES South. </p> <p>The cluster input catalogue was made by Matt Owers- talk to him if you have any questions! The WAVES catalogues were created by Sabine Bellstedt from the master WAVES catalogues, with some basic cuts to remove stars. </p> <p>You will also need the file <code>resources/Previous_Redshift_Cats/hemispec.v0.91recommended.parquet</code>. This is a compendium of literature redshifts put together by Ned Taylor for the 4HS survey. Ask him if you have any questions!</p> <p>To de-select SAMI galaxies, I'm using Jesse van de Sande's table of kinematic measurements. But really any SAMI catalogue would do here. </p> <p>Finally, you'll need a catalogue of standard stars (also known as \"F stars\" due to their spectral type) for the clusters. Matt Owers has made these, and you should have the files <code>DeCaLs_DR9_Fstars.fits</code>, <code>DeCaLs_DR9_Guide_Stars.fits</code>, <code>HECTOR_CRS_fstars_RUN8_DR9.txt</code> and <code>HECTOR_CRS_guides_RUN8_DR9.txt</code> in the <code>resources/ClusterStarCatalogues/</code> folder. For the WAVES regions, the required star catalogues will be downloaded when the pipeline is run.</p>"},{"location":"walkthrough/#other-necessary-files","title":"Other necessary files","text":"<p>There are a few more files which are needed as inputs:</p> <ul> <li>Information about the redshifts of each Hector cluster, in <code>resources/ClusterInformation/HectorCluster_Information.txt</code>.</li> <li>The galaxies we've observed up to August 2023 during commissioning. These should be in <code>resources/Galaxies_Observed_up_to_August_2023/galaxies_observed_up_to_2023.csv</code>. When the master catalogues were updated in August 2023, some galaxies which had already been observed were randomly not selected for our master catalogues. This catalogue is used to add those back in.</li> <li>Observations from the Hector Redshift Survey are stored as <code>{region_name}_{date}_field{n}_autoz.fits</code>. These are read in and matched against the WAVES Catalogues during the pipeline.</li> <li>The folder <code>JSON_badclass_votes</code> contains the results of the people's votes of inspecting the cutout images for galaxies in the Hector cluster regions. If an image is consistently marked as 'bad' for some reason, we remove it from our catalogues.</li> <li>In <code>Misc</code>, we have two csv files which contain measurements of an F-star spectrum in various different colours. One file refers to the PANSTARRS filters and the other to Skymapper filters. We use this when selecting which stars in our catalogues are likely to be suitable for standards.</li> <li>The <code>RegionInformation</code> folder contains a single file called <code>all_regions.csv</code>. This gives the details of each Region in the Hector Survey (its centre, width, height, etc).</li> </ul>"},{"location":"walkthrough/#pipeline-steps","title":"Pipeline Steps","text":"<p>The pipeline undertakes the following steps:</p> <ul> <li><code>make_redshift_catalogue_from_2dF_obs</code>: the rule takes our 2dF observations, combined them together and makes a redshift catalogue for use later. The script is <code>workflow/scripts/make_redshift_catalogue_from_observations.py</code>.</li> <li><code>make_badclass_probabilities</code>: this rule calculates the probability that each of the galaxies in the cluster catalogue is \"bad\", for some reason (i.e. close to a star, the galaxy is actually an imaging artefact, etc). The script is <code>workflow/scripts/prepare_badclass_votes_table.py</code>.</li> <li><code>prepare_WAVES_catalogue</code>: this rule takes some initial steps (such as turning flux columns into magnitudes) and makes a modified WAVES North and WAVES South catalogue. The script is <code>workflow/scripts/prepare_WAVES_catalogues.py</code>.</li> <li><code>prepare_cluster_catalogue</code>: this rule performs similar initial preparatory steps for the cluster catalogue. The script is <code>workflow/scripts/prepare_cluster_catalogue.py</code>.</li> <li><code>run_target_selection</code>: this rule takes our large master catalogues and applies the Hector selection function to them. We also remove galaxies which small half-light radii, as well as sub-sampling our catalogues to be either \"flat in mass\" (for the WAVES catalogues) or randomly sub-sampling the cluster red sequence (for the cluster catalogues) to come up with our master target-selected catalogues. The script is <code>workflow/scripts/run_target_selection.py</code>.</li> <li><code>add_previously_observed_galaxies_back_to_master_catalogue</code>: this rule adds back in galaxies which were observed in 2023/2023 which then ended up being removed when I updated the catalogues and re-ran the random sampling. The script is <code>workflow/scripts/add_observed_galaxies_to_master_catalogues.py</code>.</li> <li><code>separate_into_subregions</code>: this rule takes our master catalogues and separates them into the individual sub-regions (e.g. WAVES N --&gt; G12, G15, etc). The script is <code>workflow/scripts/separate_catalogues_into_regions.py</code>.</li> <li><code>make_star_catalogues</code>: this rule downloads star catalogues (standard stars and guide stars) for each region in the Hector survey. The script is <code>workflow/scripts/select_stars.py</code>.</li> </ul> <p>There are also equivalent scripts which do the same thing for the cluster catalogue but including low-redshift foreground galaxies in the catalogues too.</p>"}]}